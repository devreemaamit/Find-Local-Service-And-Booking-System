{% extends 'base.html' %}
{% block title %}Admin - User Bookings{% endblock %}

{% block content %}
<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="text-primary m-0">All User Bookings</h3>

    <button onclick="history.back()"
            class="btn btn-outline-secondary btn-sm">
      ← Back
    </button>
  </div>

  <!-- Table Card -->
  <div class="card shadow-sm border-0">
    <div class="card-body">

      <div class="table-responsive">
        <table class="table align-middle table-hover">

          <thead class="table-light">
            <tr>
              <th>Service</th>
              <th>Category</th>
              <th>User</th>
              <th>Provider</th>
              <th>Date</th>
              <th>Time</th>
              <th>Price</th>
              <th>Status</th>
            </tr>
          </thead>

          <tbody>
            {% for booking in bookings %}
            <tr>

              <!-- Service -->
              <td>
                <strong>{{ booking.service.service_name }}</strong>
              </td>

              <!-- Category -->
              <td>
                {{ booking.service.category.name }}
              </td>

              <!-- User -->
              <td>
                {{ booking.user.full_name }}
              </td>

              <!-- Provider -->
              <td>
                {{ booking.provider.full_name }}
              </td>

              <!-- Date -->
              <td>
                {{ booking.date }}
              </td>

              <!-- Time -->
              <td>
                {{ booking.time }}
              </td>

              <!-- Price -->
              <td class="fw-bold text-success">
                ₹ {{ booking.service.price }}
              </td>

              <!-- Status -->
              <td>
                <span class="badge
                  {% if booking.status == 'pending' %}bg-warning text-dark
                  {% elif booking.status == 'confirmed' %}bg-primary
                  {% elif booking.status == 'completed' %}bg-success
                  {% else %}bg-danger{% endif %}">
                  {{ booking.status|title }}
                </span>
              </td>

            </tr>

            {% empty %}
            <tr>
              <td colspan="8" class="text-center text-muted py-4">
                No bookings found
              </td>
            </tr>
            {% endfor %}

          </tbody>

        </table>
      </div>

    </div>
  </div>

</div>
{% endblock %}
